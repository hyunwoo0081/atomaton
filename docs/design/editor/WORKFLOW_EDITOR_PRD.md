# 워크플로우 에디터 제품 요구사항 정의서 (PRD)

## 1. 개요 (Overview)

### 1.1. 제품 정의
**Atomaton**은 개발자 및 소규모 팀을 위한 **Self-hosted 자동화 플랫폼**입니다. 이메일, 웹훅 등 다양한 이벤트를 트리거로 하여 안정적으로 메시지를 전달하고 작업을 수행합니다.

### 1.2. 배경 및 목적 (Why)
- **비용 효율성**: Zapier, Make 등 기존 상용 툴의 비싼 과금 구조(Task당 과금)를 탈피하고, 개인 서버 리소스를 활용하여 비용을 절감합니다.
- **데이터 안정성 (Reliability)**: Google Apps Script(GAS) 등 단순 스크립트 방식은 외부 서비스(Discord 등) 장애 시 데이터가 유실될 위험이 있습니다. Atomaton은 **자체 큐(Queue)와 재시도(Retry) 로직**을 통해 메시지 전달을 보장합니다.
- **통합 관리**: 흩어져 있는 여러 이메일 계정과 웹훅 트리거를 한곳에서 중앙 집중적으로 관리합니다.

### 1.3. 타겟 유저 (Who)
- **핵심 유저**: **사내 개발자 및 테크 리드**.
    - JSON 설정, Webhook 연동 등에 익숙함.
    - GUI의 편리함과 코드의 자유도(JSON Editor)를 동시에 원함.
- **사용 환경**: 데스크탑 환경(PC) 위주. 모바일은 단순 모니터링 용도.

---

## 2. 핵심 유저 시나리오 (Core User Scenarios)

### 시나리오 1: "안정적인 이메일 알림 파이프라인 구축"
1.  개발자는 사내 중요 메일(서버 장애, 결제 오류 등)을 놓치지 않기 위해 Atomaton을 설치합니다.
2.  **IMAP Trigger**를 설정하여 여러 개의 모니터링용 메일 계정을 연결합니다.
3.  **Discord Action**을 연결하고, 사내 알림 채널 웹훅을 등록합니다.
4.  만약 디스코드 서버가 점검 중이라 전송에 실패하더라도, Atomaton 내부 큐에서 **자동으로 재시도(Retry)**하여 서비스 복구 후 메시지가 전송됨을 보장받습니다.

### 시나리오 2: "외부 스크립트(GAS) 연동 및 비용 절감"
1.  기존에 사용하던 Google Apps Script에서 직접 디스코드로 쏘던 로직을 Atomaton **Webhook Trigger**로 변경합니다.
2.  이를 통해 GAS 실행 시간 제한이나 외부 API 장애에 구애받지 않고, 안정적인 비동기 처리를 구현합니다.

### 시나리오 3: "실패 상황 모니터링"
1.  워크플로우 설정에서 **"실패 알림 채널(Failure Notification Channel)"**을 등록합니다.
2.  특정 자동화가 재시도 횟수를 초과하여 최종 실패할 경우, 지정된 채널로 에러 로그가 전송되어 즉시 대응할 수 있습니다.

---

## 3. 성공 지표 (Success Metrics)

### 3.1. 안정성 지표 (Reliability)
- **메시지 전달 성공률**: (전체 트리거 수 - 최종 실패 수) / 전체 트리거 수. **목표: 99.9%**
- **재시도 성공률**: 1차 실패 후 재시도를 통해 성공한 비율.

### 3.2. 활성화 지표 (Activation)
- **활성 워크플로우 수**: 실제 트래픽이 발생하고 있는 워크플로우 개수.
- **워크플로우 생성 완료율**: 에디터 진입 후 저장까지 완료하는 비율. **목표: 60% 이상**

---

## 4. 기능 요구사항 요약 (Functional Requirements)

### 4.1. 캔버스 및 노드
- **개발자 친화적 UI**: 직관적인 드래그 앤 드롭과 함께, 상세 설정에서는 **JSON Editor**를 적극 활용하여 자유도 보장.
- **노드 타입**: Trigger(IMAP, Webhook), Logic(Condition), Action(Discord, Notion).

### 4.2. 안정성 기능
- **재시도(Retry)**: 전역 설정(Global Config)에 따라 지수 백오프(Exponential Backoff) 방식으로 자동 재시도.
- **실패 알림**: 워크플로우별 또는 전역으로 실패 시 알림을 보낼 Webhook URL 설정 기능.

### 4.3. 테스트 및 디버깅
- **즉시 실행 테스트**: 모의 데이터(Payload)를 주입하여 로직을 검증하는 기능.
- **상세 로그**: 각 단계별 실행 결과, 소요 시간, 에러 메시지를 상세히 기록.
