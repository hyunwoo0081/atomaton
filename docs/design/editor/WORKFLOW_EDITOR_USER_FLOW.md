# 워크플로우 에디터 사용자 흐름도 (User Flow)

이 문서는 사용자가 워크플로우 에디터에서 수행하는 주요 작업의 흐름과 예외 케이스를 정의합니다.

## 1. 워크플로우 생성 및 노드 추가 (Create & Add Node)

### 1.1. Happy Path (정상 흐름)
1.  **진입**: 사용자가 'New Workflow' 버튼을 눌러 에디터에 진입합니다.
2.  **빈 화면**: 캔버스 중앙에 "Add Trigger" 버튼이 보입니다.
3.  **트리거 추가**:
    -   버튼 클릭 또는 사이드바에서 드래그하여 'IMAP Email' 트리거를 추가합니다.
    -   노드가 생성되고 설정 패널이 자동으로 열립니다.
4.  **액션 추가**:
    -   트리거 노드의 핸들에서 선을 끌어 빈 공간에 놓습니다.
    -   'Node Selection Modal'이 뜹니다.
    -   'Discord Webhook'을 선택합니다.
    -   액션 노드가 생성되고 자동으로 연결됩니다.

### 1.2. Edge Cases (예외 케이스)
-   **잘못된 드롭**: 캔버스가 아닌 영역에 노드를 드롭하면 아무 일도 일어나지 않아야 합니다.
-   **순환 참조**: 이미 연결된 노드끼리 다시 연결하여 루프(Loop)를 만들려고 하면 연결이 거부되어야 합니다.

---

## 2. 노드 설정 및 유효성 검사 (Configure & Validate)

### 2.1. Happy Path
1.  **설정 열기**: 노드를 클릭하여 설정 패널을 엽니다.
2.  **값 입력**: 필수 항목(예: Webhook URL)을 입력합니다.
    -   *개발자 편의 기능*: JSON Editor를 통해 복잡한 설정을 직접 수정할 수 있습니다.
3.  **저장**: 'Apply' 버튼을 누릅니다.
4.  **피드백**: 노드의 상태 아이콘이 ⚠️에서 ✅로 변경됩니다.
5.  **전체 저장**: 모든 노드가 ✅ 상태가 되면 사이드바의 'Save' 버튼이 활성화됩니다.

### 2.2. Edge Cases
-   **계정 없음**: IMAP 트리거 설정 시 등록된 계정이 없을 경우, 드롭다운 내 '+ Connect Account'를 눌러 즉시 계정을 추가할 수 있어야 합니다.

---

## 3. 테스트 및 디버깅 (Test & Debug)

### 3.1. Happy Path
1.  **테스트 실행**: 'Run Test' 버튼을 클릭합니다.
2.  **데이터 입력**: 모달에서 가상의 트리거 데이터(JSON)를 확인하고 수정합니다.
3.  **결과 확인**: 실행 결과(성공/실패 로그)를 확인하고 모달을 닫습니다.

### 3.2. 실패 시나리오 (Failure Handling)
1.  **실행 실패**: 테스트 실행 중 에러가 발생하면 붉은색 로그가 표시됩니다.
2.  **재시도 시뮬레이션**: (선택 사항) 실제 운영 환경에서의 재시도 로직이 어떻게 동작할지 로그로 미리 보여줍니다.

---

## 4. 운영 및 모니터링 (Operation)

### 4.1. 실패 알림 설정
1.  헤더의 'Global Settings' 버튼을 클릭합니다.
2.  'Failure Notification'을 활성화하고, 알림을 받을 Discord Webhook URL을 입력합니다.
3.  저장 후, 실제 운영 중 최종 실패가 발생하면 해당 채널로 알림이 전송됩니다.
